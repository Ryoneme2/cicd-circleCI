version: 2.1
orbs:
  node : circleci/node@5.0.3
  gh-pages: sugarshin/gh-pages@1.0.1

jobs:
  install-n-test:
    executor : 
      name : node/default
      tag : '16.17'
    steps:
      - checkout
      - node/install-packages
      - run : 'npm run test'
  build_deploy:
    executor: gh-pages/default
    steps:
      - checkout
      - run: ./build.sh
      - gh-pages/deploy:
          setup-git: true
          ssh-fingerprints: $fingerprint

workflows:
  test-my-app:
    jobs:
      - install-n-test
      - build_deploy